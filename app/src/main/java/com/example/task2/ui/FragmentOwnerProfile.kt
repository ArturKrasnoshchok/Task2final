package com.example.task2.ui

import android.os.Bundle
import androidx.fragment.app.Fragment
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import androidx.navigation.fragment.findNavController
import com.example.task2.R
import com.example.task2.databinding.FragmentOwnerProfileBinding
import com.example.task2.extension.loadCirclePicture


class FragmentOwnerProfile : Fragment() {

    private lateinit var binding: FragmentOwnerProfileBinding
    private val profession = "android developer"
    private val myAddress = "London"
    private val myAvatar =
        "data:image/jpeg;base64,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"


    override fun onCreateView(
        inflater: LayoutInflater, container: ViewGroup?,
        savedInstanceState: Bundle?
    ): View? {
        // Inflate the layout for this fragment
        binding = FragmentOwnerProfileBinding.inflate(inflater, container, false)
        return binding.root
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)
        setUserProfile()
        binding.buttonViewContacts.setOnClickListener { moveToMyContacts() }
    }

    private fun setUserProfile() {
        val firstName = activity?.intent?.getStringExtra("FIRST_NAME_ARG").toString()
        val lastName = activity?.intent?.getStringExtra("LAST_NAME_ARG").toString()
        val myName = "$firstName $lastName"

        binding.tvUserName.text = myName
        binding.tvUserProfession.text = profession
        binding.tvUserAddress.text = myAddress
        binding.ivAvatar.loadCirclePicture(
            image = myAvatar,
            placeholder = R.drawable.ic_user_avatar,
            error = R.drawable.ic_user_avatar
        )
    }

    private fun moveToMyContacts() {
        findNavController().navigate(R.id.fragmentContacts)
    }

}